<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>V8 vs EV ‚Äî Street Laughs</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#10141a"/>
  <style>
    body{margin:0;background:#000;color:#fff;font-family:sans-serif;overflow:hidden}
    #game{width:100%;height:100vh;display:block;background:#000}
    #menuOverlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);color:#fff;z-index:10}
    button{padding:10px 20px;font-size:18px}
  </style>
</head>
<body>
<canvas id="game" width="480" height="800"></canvas>
<div id="menuOverlay">
  <div style="text-align:center">
    <h2>üèÅ V8 vs EV</h2>
    <p>Trans Am '75 vs. Elektro-Kisten</p>
    <button id="startBtn">Start</button>
  </div>
</div>
<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
let W=canvas.width,H=canvas.height;
const lanes=[W*0.22,W*0.5,W*0.78];
let state='menu'; let score=0;

const transAm=new Image(); transAm.src='assets/transam.png';
const fiat=new Image(); fiat.src='assets/fiat.png';
const bg=new Image(); bg.src='assets/bg.png';

const player={lane:1,y:H*0.7,w:80,h:120};

const objs=[];
function spawn(){
  if(Math.random()<0.03){
    objs.push({lane:Math.floor(Math.random()*3),y:-120,w:80,h:120,type:'ev'});
  }
}

function update(){
  for(let o of objs){o.y+=5;}
  for(let i=objs.length-1;i>=0;i--){
    if(objs[i].y>H+100) objs.splice(i,1);
    else{
      if(objs[i].lane===player.lane && Math.abs(objs[i].y-player.y)<100){
        state='menu';
        document.getElementById('menuOverlay').style.display='flex';
      }
    }
  }
  score++;
}

function draw(){
  ctx.clearRect(0,0,W,H);
  ctx.drawImage(bg,0,0,W,H);
  for(let o of objs){
    ctx.drawImage(fiat, lanes[o.lane]-40,o.y,o.w,o.h);
  }
  ctx.drawImage(transAm, lanes[player.lane]-40,player.y,player.w,player.h);
  ctx.fillStyle='#000a'; ctx.fillRect(0,0,150,40);
  ctx.fillStyle='#fff'; ctx.fillText("Score:"+score,10,20);
}

function loop(){
  if(state==='playing'){spawn();update();}
  draw();
  requestAnimationFrame(loop);
}
loop();

document.getElementById('startBtn').onclick=()=>{
  state='playing'; score=0; objs.length=0;
  document.getElementById('menuOverlay').style.display='none';
};

window.addEventListener('keydown',e=>{
  if(state!=='playing') return;
  if(e.key==='ArrowLeft') player.lane=Math.max(0,player.lane-1);
  if(e.key==='ArrowRight') player.lane=Math.min(2,player.lane+1);
});
</script>
</body>
</html>
